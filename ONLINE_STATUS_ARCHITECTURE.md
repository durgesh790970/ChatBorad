# Online Status Feature - Architecture & Flow Diagram

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CHATBOARD                               â”‚
â”‚                    Online Status Feature                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              online_status.html Template                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚   Header    â”‚  Statistics  â”‚  Search & Filters   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  (Logo,     â”‚   (4 Cards)  â”‚  (Input, Buttons)   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   Login)    â”‚              â”‚                      â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚           User Cards Grid (Responsive)            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ User 1   â”‚  â”‚ User 2   â”‚  â”‚ User 3   â”‚  ...  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ [Avatar] â”‚  â”‚ [Avatar] â”‚  â”‚ [Avatar] â”‚        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Status   â”‚  â”‚ Status   â”‚  â”‚ Status   â”‚        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Details  â”‚  â”‚ Details  â”‚  â”‚ Details  â”‚        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Actions  â”‚  â”‚ Actions  â”‚  â”‚ Actions  â”‚        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  JavaScript Functions:                                   â”‚ â”‚
â”‚  â”‚  â€¢ loadUsers() â†’ Fetch from API                         â”‚ â”‚
â”‚  â”‚  â€¢ displayUsers() â†’ Render cards                        â”‚ â”‚
â”‚  â”‚  â€¢ updateStats() â†’ Update counters                      â”‚ â”‚
â”‚  â”‚  â€¢ refreshUserStatus() â†’ Auto-refresh (3s)             â”‚ â”‚
â”‚  â”‚  â€¢ setupEventListeners() â†’ Handle interactions          â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â¬‡ï¸ Fetch                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  GET /api/online-status/                                       â”‚
â”‚  â”œâ”€ Authentication Check (@login_required)                     â”‚
â”‚  â”œâ”€ Exclude Current User                                       â”‚
â”‚  â”œâ”€ Prefetch User Profiles                                     â”‚
â”‚  â””â”€ Return JSON Response                                       â”‚
â”‚                                                                  â”‚
â”‚  Response Format:                                              â”‚
â”‚  {                                                             â”‚
â”‚    "users": [                                                 â”‚
â”‚      {                                                        â”‚
â”‚        "id": 2,                                              â”‚
â”‚        "name": "John Doe",                                   â”‚
â”‚        "username": "johndoe",                                â”‚
â”‚        "status": "online",                                   â”‚
â”‚        "is_online": true,                                    â”‚
â”‚        "message_count": 45,                                  â”‚
â”‚        "last_seen": "2025-12-19T14:30:00Z",                â”‚
â”‚        "joined_date": "2025-01-01T10:00:00Z"               â”‚
â”‚      },                                                      â”‚
â”‚      ...                                                     â”‚
â”‚    ],                                                        â”‚
â”‚    "total_count": 15,                                       â”‚
â”‚    "timestamp": "2025-12-19T14:35:00Z"                     â”‚
â”‚  }                                                           â”‚
â”‚                          â¬‡ï¸ Process                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND LAYER (Django)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Views (chat/views.py):                                        â”‚
â”‚  â”œâ”€ online_status_view(request)                              â”‚
â”‚  â”‚  â””â”€ Render: online_status.html                            â”‚
â”‚  â”‚                                                            â”‚
â”‚  â””â”€ api_online_status(request)                               â”‚
â”‚     â”œâ”€ Check: user is authenticated                          â”‚
â”‚     â”œâ”€ Query: User.objects.exclude(id=...)                  â”‚
â”‚     â”œâ”€ Process: Build user data                             â”‚
â”‚     â””â”€ Return: JsonResponse                                 â”‚
â”‚                          â¬‡ï¸ Query                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Tables Used:                                                  â”‚
â”‚  â”œâ”€ auth_user (Django User model)                             â”‚
â”‚  â”‚  â”œâ”€ id, username, first_name, last_name                  â”‚
â”‚  â”‚  â”œâ”€ email, date_joined                                   â”‚
â”‚  â”‚  â””â”€ ... (other auth fields)                              â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”œâ”€ chat_userprofile (Custom UserProfile)                   â”‚
â”‚  â”‚  â”œâ”€ user_id (ForeignKey to auth_user)                    â”‚
â”‚  â”‚  â”œâ”€ is_online (BooleanField)                             â”‚
â”‚  â”‚  â”œâ”€ created_at, updated_at                               â”‚
â”‚  â”‚  â””â”€ (linked via OneToOneField)                           â”‚
â”‚  â”‚                                                            â”‚
â”‚  â””â”€ chat_message (Message history - for last_seen)          â”‚
â”‚     â”œâ”€ sender_id, receiver_id (ForeignKeys)                â”‚
â”‚     â”œâ”€ timestamp (used for last_seen)                      â”‚
â”‚     â””â”€ ... (message fields)                                 â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
USER ACTION
    â”‚
    â”œâ”€ Page Load
    â”‚    â”‚
    â”‚    â””â”€â”€â–º loadUsers()
    â”‚         â””â”€â”€â–º fetch('/api/online-status/')
    â”‚              â”‚
    â”‚              â””â”€â”€â–º Backend API
    â”‚                   â”œâ”€ Check Authentication
    â”‚                   â”œâ”€ Query Database
    â”‚                   â”œâ”€ Build User List
    â”‚                   â””â”€ Return JSON
    â”‚              â”‚
    â”‚              â””â”€â”€â–º displayUsers()
    â”‚                   â”œâ”€ Filter by Search
    â”‚                   â”œâ”€ Filter by Status
    â”‚                   â”œâ”€ Render Cards
    â”‚                   â””â”€ Update Display
    â”‚              â”‚
    â”‚              â””â”€â”€â–º updateStats()
    â”‚                   â”œâ”€ Count Online Users
    â”‚                   â”œâ”€ Count Offline Users
    â”‚                   â”œâ”€ Count Away Users
    â”‚                   â”œâ”€ Count Busy Users
    â”‚                   â””â”€ Update Stat Cards
    â”‚
    â”œâ”€ Search Input
    â”‚    â”‚
    â”‚    â””â”€â”€â–º Update searchQuery Variable
    â”‚         â””â”€â”€â–º displayUsers()
    â”‚              â””â”€â”€â–º Render Filtered Results
    â”‚
    â”œâ”€ Filter Click
    â”‚    â”‚
    â”‚    â””â”€â”€â–º Update currentFilter Variable
    â”‚         â”œâ”€ Update Active Button
    â”‚         â””â”€â”€â–º displayUsers()
    â”‚              â””â”€â”€â–º Render Filtered Results
    â”‚
    â”œâ”€ Message Click
    â”‚    â”‚
    â”‚    â””â”€â”€â–º Navigate to /chat/{user_id}/
    â”‚
    â”œâ”€ Auto-Refresh (Every 3 seconds)
    â”‚    â”‚
    â”‚    â””â”€â”€â–º refreshUserStatus()
    â”‚         â””â”€â”€â–º fetch('/api/online-status/')
    â”‚              â””â”€â”€â–º Update Display
    â”‚
    â””â”€ Page Unload
         â”‚
         â””â”€â”€â–º Clear Intervals
              â””â”€â”€â–º Save Session
```

---

## ğŸ“Š Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Header Component                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Logo: "ChatBoard"                  â”‚
â”‚ â€¢ Current User: Display name         â”‚
â”‚ â€¢ Navigation: Dashboard, Logout      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                     â”‚                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚  Page Title     â”‚   â”‚  Subtitle    â”‚  â”‚  Statistics  â”‚
    â”‚  ğŸ‘¥ Online      â”‚   â”‚  Real-time   â”‚  â”‚  Cards       â”‚
    â”‚  Status         â”‚   â”‚  availabilityâ”‚  â”‚ (4 counters) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      Search & Filter Component             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ [Search Box] [Filter Buttons]             â”‚
    â”‚ â€¢ Input field with placeholder           â”‚
    â”‚ â€¢ 5 Filter buttons (All, Online, etc.)   â”‚
    â”‚ â€¢ Real-time search & filter logic        â”‚
    â””â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      User Cards Grid Component            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
    â”‚ â”‚  Card 1     â”‚  â”‚  Card 2     â”‚  ...   â”‚
    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
    â”‚ â”‚ Avatar      â”‚  â”‚ Avatar      â”‚        â”‚
    â”‚ â”‚ Name        â”‚  â”‚ Name        â”‚        â”‚
    â”‚ â”‚ Status      â”‚  â”‚ Status      â”‚        â”‚
    â”‚ â”‚ Details     â”‚  â”‚ Details     â”‚        â”‚
    â”‚ â”‚ Actions     â”‚  â”‚ Actions     â”‚        â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
    â”‚                                          â”‚
    â”‚ â€¢ Responsive Grid Layout                â”‚
    â”‚ â€¢ Hover Effects                         â”‚
    â”‚ â€¢ Dynamic Rendering                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Flow

```
USER ATTEMPTS ACCESS
    â”‚
    â”œâ”€â–º @login_required Decorator
    â”‚    â”‚
    â”‚    â”œâ”€ Check: Is user authenticated?
    â”‚    â”‚
    â”‚    â”œâ”€ YES: Continue to view
    â”‚    â”‚  â”‚
    â”‚    â”‚  â””â”€â–º Render Template
    â”‚    â”‚
    â”‚    â””â”€ NO: Redirect to login page
    â”‚
    â””â”€â–º API Endpoint Authentication
         â”‚
         â”œâ”€ Check: Authorization header
         â”‚
         â”œâ”€ YES: Process request
         â”‚  â”‚
         â”‚  â”œâ”€ Exclude current user from results
         â”‚  â”œâ”€ Query database
         â”‚  â””â”€ Return user data
         â”‚
         â””â”€ NO: Return 401 Unauthorized
```

---

## ğŸ“± Responsive Layout Flow

```
DESKTOP (1200px+)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Header                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Stats (4 columns)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Search | Filters                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ C1  â”‚ C2  â”‚ C3  â”‚ C4  â”‚          â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ C5  â”‚ C6  â”‚ C7  â”‚ C8  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TABLET (768-1200px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Header                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Stats (2 columns)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Search | Filters             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ C1  â”‚ C2  â”‚                 â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚ C3  â”‚ C4  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MOBILE (<768px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Header                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Stats (1 col / 2 col)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Search                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filters (stacked)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      C1                      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚      C2                      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚      C3                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Auto-Refresh Cycle

```
START
  â”‚
  â”œâ”€â–º Initial Load: loadUsers()
  â”‚    â”‚
  â”‚    â””â”€â–º Set Interval: Every 3000ms
  â”‚
INTERVAL TRIGGER (Every 3 seconds)
  â”‚
  â”œâ”€â–º refreshUserStatus()
  â”‚    â”‚
  â”‚    â”œâ”€â–º Fetch from API
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€â–º /api/online-status/
  â”‚    â”‚
  â”‚    â”œâ”€â–º Update Data: allUsers = data.users
  â”‚    â”‚
  â”‚    â”œâ”€â–º Re-render: displayUsers()
  â”‚    â”‚
  â”‚    â””â”€â–º Update Stats: updateStats()
  â”‚
  â””â”€â–º Wait 3 seconds
       â”‚
       â””â”€â–º REPEAT (until page closes)

WHEN PAGE CLOSES
  â”‚
  â””â”€â–º Clear Interval
       â””â”€â–º Stop Auto-Refresh
```

---

## ğŸ¯ Event Handling Flow

```
EVENT: Search Input
  â”‚
  â””â”€â–º keyup event
       â”‚
       â”œâ”€â–º Get input value
       â”œâ”€â–º Update searchQuery variable
       â”œâ”€â–º Call displayUsers()
       â”‚   â”œâ”€ Filter by search
       â”‚   â”œâ”€ Apply current filter
       â”‚   â””â”€ Render results
       â””â”€â–º Done

EVENT: Filter Button Click
  â”‚
  â””â”€â–º click event
       â”‚
       â”œâ”€â–º Remove active class from all buttons
       â”œâ”€â–º Add active class to clicked button
       â”œâ”€â–º Update currentFilter variable
       â”œâ”€â–º Call displayUsers()
       â”‚   â”œâ”€ Apply new filter
       â”‚   â”œâ”€ Keep search query
       â”‚   â””â”€ Render results
       â””â”€â–º Done

EVENT: Message Button Click
  â”‚
  â””â”€â–º click event
       â”‚
       â”œâ”€â–º Get user_id
       â”œâ”€â–º Navigate to /chat/{user_id}/
       â””â”€â–º Open chat with user

EVENT: Profile Button Click
  â”‚
  â””â”€â–º click event (future feature)
       â”‚
       â”œâ”€â–º Get user_id
       â”œâ”€â–º Show profile modal
       â””â”€â–º Display user information
```

---

## ğŸ’¾ Database Query Diagram

```
QUERY: Get All Users with Status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User.objects.exclude(id=current_user)   â”‚
â”‚           .prefetch_related('profile')   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â–º Query auth_user table
                 â”‚    â”œâ”€ Exclude current user
                 â”‚    â””â”€ Select all others
                 â”‚
                 â”œâ”€â–º Query chat_userprofile
                 â”‚    â”œâ”€ Get is_online flag
                 â”‚    â””â”€ Determine status
                 â”‚
                 â””â”€â–º Return user objects
                      â”‚
                      â””â”€â–º Process in API
                           â”œâ”€ Get message count
                           â”œâ”€ Get last seen
                           â”œâ”€ Get joined date
                           â””â”€ Return JSON
```

---

## ğŸ¨ CSS Cascade Diagram

```
online_status.html <styles>
  â”‚
  â”œâ”€â–º Global Styles
  â”‚    â”œâ”€ * { margin: 0; padding: 0; }
  â”‚    â”œâ”€ body { font-family, background }
  â”‚    â””â”€ html, body { height: 100% }
  â”‚
  â”œâ”€â–º Header Styles
  â”‚    â”œâ”€ .header { gradient background }
  â”‚    â”œâ”€ .header-content { flex layout }
  â”‚    â”œâ”€ .logo { font styling }
  â”‚    â”œâ”€ .user-menu { flex layout }
  â”‚    â””â”€ .logout-btn { button styles }
  â”‚
  â”œâ”€â–º Container Styles
  â”‚    â”œâ”€ .container { max-width, padding }
  â”‚    â”œâ”€ .page-title { large heading }
  â”‚    â””â”€ .page-subtitle { small text }
  â”‚
  â”œâ”€â–º Control Styles
  â”‚    â”œâ”€ .search-box { input styling }
  â”‚    â”œâ”€ .filter-group { flex layout }
  â”‚    â”œâ”€ .filter-btn { button styling }
  â”‚    â””â”€ .filter-btn.active { highlighted }
  â”‚
  â”œâ”€â–º Stats Styles
  â”‚    â”œâ”€ .status-stats { grid layout }
  â”‚    â”œâ”€ .stat-card { card styling }
  â”‚    â”œâ”€ .stat-number { large number }
  â”‚    â””â”€ .stat-label { small label }
  â”‚
  â”œâ”€â–º Card Styles
  â”‚    â”œâ”€ .users-grid { CSS Grid }
  â”‚    â”œâ”€ .user-card { card container }
  â”‚    â”œâ”€ .user-header { flex layout }
  â”‚    â”œâ”€ .user-avatar { circle styling }
  â”‚    â”œâ”€ .status-indicator { dot styling }
  â”‚    â”œâ”€ .user-info { text styling }
  â”‚    â”œâ”€ .user-name { heading }
  â”‚    â”œâ”€ .user-username { subtext }
  â”‚    â”œâ”€ .status-badge { badge styling }
  â”‚    â”œâ”€ .user-details { detail section }
  â”‚    â””â”€ .card-actions { button section }
  â”‚
  â”œâ”€â–º Responsive Styles
  â”‚    â”œâ”€ @media (max-width: 768px)
  â”‚    â”‚  â”œâ”€ Single column layout
  â”‚    â”‚  â”œâ”€ Stacked controls
  â”‚    â”‚  â””â”€ Mobile optimized
  â”‚    â”‚
  â”‚    â””â”€ @media (min-width: 768px)
  â”‚       â”œâ”€ Multi-column grid
  â”‚       â”œâ”€ Side-by-side controls
  â”‚       â””â”€ Desktop optimized
  â”‚
  â””â”€â–º Animation Styles
       â”œâ”€ .user-card:hover { transform }
       â”œâ”€ Transitions { smooth animation }
       â””â”€ @keyframes spin { loading spinner }
```

---

## âœ¨ Summary

This architecture provides:
- **Separation of Concerns**: Frontend, API, Backend, Database layers
- **Scalability**: Can handle many users with pagination (future)
- **Security**: Authentication required, user exclusion
- **Performance**: Efficient queries, responsive design, debounced search
- **Maintainability**: Clean code structure, documented components
- **User Experience**: Auto-refresh, real-time updates, intuitive UI

---

**Diagram Version**: 1.0  
**Last Updated**: December 19, 2025  
**Status**: âœ… COMPLETE
